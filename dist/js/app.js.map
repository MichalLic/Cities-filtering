{"version":3,"sources":["cities-filtering.js"],"names":["Filter","ARRAY_DATA","SINGLE_DATA_OBJECTS","$FILTER_INPUT","$","$TABLE_CONTENT","$TABLE","SHOW_VAL","init","getData","ajax","url","method","success","response","getJsonToArray","filterData","error","alert","on","inputVal","this","value","empty","myRegex","RegExp","filter","cityOrState","checkContent","city","state","show","coloringSearching","population","formatValueOfPopulation","mustacheRender","hide","match","place","replace","data","toString","JSON","parse","template","html","Mustache","rendered","render","append","element","addedClass","removeClass","addedClasses","addClass","document","ready"],"mappings":"AAAA,GAAAA,SAEAC,WAAA,GACAC,oBAAA,GACAC,cAAAC,EAAA,iBACAC,eAAAD,EAAA,kBACAE,OAAAF,EAAA,UACAG,SAAA,OAKAC,KAAA,WACAR,OAAAS,WAMAA,QAAA,WACAL,EAAAM,MACAC,IAAA,4HACAC,OAAA,MACAC,QAAA,SAAAC,GACAd,OAAAC,WAAAD,OAAAe,eAAAD,GACAd,OAAAgB,WAAAF,IAEAG,MAAA,WACAC,MAAA,0BAQAF,WAAA,WAEAhB,OAAAG,cAAAgB,GAAA,QAAA,WACA,GAAAC,GAAAC,KAAAC,KAEA,IADAtB,OAAAK,eAAAkB,QACA,IAAAH,EAAA,CACA,GAAAI,GAAA,GAAAC,QAAAL,EAAA,KAEApB,QAAAC,WAAAyB,OAAA,SAAAC,GACA3B,OAAA4B,aAAAD,EAAAE,KAAAL,EAAAG,EAAAG,SACA9B,OAAA+B,KAAA/B,OAAAM,OAAAN,OAAAO,UACAoB,EAAA,OAAA3B,OAAAgC,kBAAAL,EAAAE,KAAAL,GACAG,EAAA,QAAA3B,OAAAgC,kBAAAL,EAAAG,MAAAN,GACAG,EAAAM,WAAAjC,OAAAkC,wBAAAP,GACA3B,OAAAmC,eAAAR,UAIA3B,QAAAoC,KAAApC,OAAAM,OAAAN,OAAAO,aAQAqB,aAAA,SAAAC,EAAAL,EAAAM,GACA,MAAAD,GAAAQ,MAAAb,IAAAM,EAAAO,MAAAb,IAUAQ,kBAAA,SAAAM,EAAAd,GACA,MAAAc,GAAAC,QAAAf,EAAA,SAAAa,GACA,MAAA,0BAAAA,EAAA,aASAH,wBAAA,SAAAM,GACA,MAAAA,GAAAP,WAAAQ,WAAAF,QAAA,2BAAA,QAQAxB,eAAA,SAAAyB,GACA,MAAAE,MAAAC,MAAAH,IAOAL,eAAA,SAAAK,GACA,GAAAI,GAAAxC,EAAA,aAAAyC,MACAC,UAAAH,MAAAC,EACA,IAAAG,GAAAD,SAAAE,OAAAJ,EAAAJ,EACAxC,QAAAK,eAAA4C,OAAAF,IAGAX,KAAA,SAAAc,EAAAC,GACAD,EAAAE,YAAAD,IAGApB,KAAA,SAAAmB,EAAAG,GACAH,EAAAI,SAAAD,IAGAjD,GAAAmD,UAAAC,MAAA,WACAxD,OAAAQ","file":"app.js","sourcesContent":["var Filter = {\r\n    //variables\r\n    ARRAY_DATA: '',\r\n    SINGLE_DATA_OBJECTS: '',\r\n    $FILTER_INPUT: $('.filter-input'),\r\n    $TABLE_CONTENT: $('.table-content'),\r\n    $TABLE: $('.table'),\r\n    SHOW_VAL: 'show',\r\n\r\n    /**\r\n     * init\r\n     */\r\n    init: function () {\r\n        Filter.getData();\r\n    },\r\n\r\n    /**\r\n     * functions\r\n     */\r\n    getData: function () {\r\n        $.ajax({\r\n            url: 'https://gist.githubusercontent.com/Miserlou/c5cd8364bf9b2420bb29/raw/2bf258763cdddd704f8ffd3ea9a3e81d25e2c6f6/cities.json',\r\n            method: 'GET',\r\n            success: function (response) {\r\n                Filter.ARRAY_DATA = Filter.getJsonToArray(response);\r\n                Filter.filterData(response);\r\n            },\r\n            error: function () {\r\n                alert('Getting data error');\r\n            }\r\n        })\r\n    },\r\n\r\n    /**\r\n     * filter data by keyup and filter functions\r\n     */\r\n    filterData: function () {\r\n        //init function after enter chars\r\n        Filter.$FILTER_INPUT.on('keyup', function () {\r\n            var inputVal = this.value;\r\n            Filter.$TABLE_CONTENT.empty();\r\n            if (inputVal != '') {\r\n                var myRegex = new RegExp(inputVal, 'gi');\r\n                //filter data by single object\r\n                Filter.ARRAY_DATA.filter(function (cityOrState) {\r\n                    if (Filter.checkContent(cityOrState.city, myRegex, cityOrState.state)) {\r\n                        Filter.show(Filter.$TABLE, Filter.SHOW_VAL);\r\n                        cityOrState['mycity'] = Filter.coloringSearching(cityOrState.city, myRegex);\r\n                        cityOrState['mystate'] = Filter.coloringSearching(cityOrState.state, myRegex);\r\n                        cityOrState.population = Filter.formatValueOfPopulation(cityOrState);\r\n                        Filter.mustacheRender(cityOrState);\r\n                    }\r\n                });\r\n            } else {\r\n                Filter.hide(Filter.$TABLE, Filter.SHOW_VAL);\r\n            }\r\n        })\r\n    },\r\n\r\n    /**\r\n     * compare city/state value with new create regex\r\n     */\r\n    checkContent: function (city, myRegex, state) {\r\n        return city.match(myRegex) || state.match(myRegex)\r\n\r\n    },\r\n\r\n    /**\r\n     * set background to searching data string\r\n     * @param place\r\n     * @param myRegex\r\n     * @returns {*}\r\n     */\r\n    coloringSearching: function (place, myRegex) {\r\n        return place.replace(myRegex, function (match) {\r\n            return '<span class=\"selected\">' + match + '</span>';\r\n        });\r\n    },\r\n\r\n    /**\r\n     * format data value\r\n     * @param data\r\n     * @returns {*}\r\n     */\r\n    formatValueOfPopulation: function (data) {\r\n        return (data.population.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1,\"));\r\n    },\r\n\r\n    /**\r\n     * convert json to array data\r\n     * @param data\r\n     * @returns {*}\r\n     */\r\n    getJsonToArray: function (data) {\r\n        return JSON.parse(data);\r\n    },\r\n\r\n    /**\r\n     * append data by mustache\r\n     * @param data\r\n     */\r\n    mustacheRender: function (data) {\r\n        var template = $('#template').html();\r\n        Mustache.parse(template);\r\n        var rendered = Mustache.render(template, data);\r\n        Filter.$TABLE_CONTENT.append(rendered);\r\n    },\r\n\r\n    hide: function (element, addedClass) {\r\n        element.removeClass(addedClass)\r\n    },\r\n\r\n    show: function (element, addedClasses) {\r\n        element.addClass(addedClasses)\r\n    }\r\n};\r\n$(document).ready(function () {\r\n    Filter.init();\r\n});"]}